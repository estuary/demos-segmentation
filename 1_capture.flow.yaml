captures:
  examples/segment/event-generator:
    endpoint:
      airbyteSource:
        image: ghcr.io/estuary/demos-segmentation-event-generator:ad05fa1
        config:
          maxEventsPerSecond: 1000
          # Maximum number of Events produced per second
          # [integer] (required)

          segmentCardinality: 500
          # Number of unique segments to use when generating events
          # [integer] (required)

          userCardinality: 10000
          # Number of unique users to use when generating events
          # [integer] (required)
    bindings:
      - resource:
          stream: segmentation-events
          syncMode: incremental
        target: examples/segment/events

collections:
  # Segmentation events, each representing an add or remove of a user to a segment.
  examples/segment/events:
    schema: schemas/event.schema.yaml
    key: [/event]
    projections:
      vendor:
        location: /segment/vendor
        partition: true

      # Project for natural querying (without needing to quote 'segment/name').
      segment_name: /segment/name
      user_id: /user
