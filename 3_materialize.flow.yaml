import:
  - 2_derive.flow.yaml

# Materializations bind a collection to a destination endpoint.
materializations:
  demo/target/database:
    bindings:
      - source: examples/segment/memberships
        resource:
          table: segment_memberships
      - source: examples/segment/profiles
        resource:
          table: segment_profiles
        fields:
          include:
            segments: {}
          recommended: true
    endpoint:
      postgres:
        host: localhost
        port: 5432
        user: flow
        password: flow
        database: flow

  # Run `node demo-webhook-api.js` before materializing to this endpoint.
  demo/target/webhook:
    bindings:
      - source: examples/segment/toggles
        resource: {}
      # Uncomment me to materialize Webhook calls from profiles.
      # - source: examples/segment/profiles
      #   resource: {}
    endpoint:
      webhook:
        address: http://localhost:9000/
